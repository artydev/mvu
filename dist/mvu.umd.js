(function(O){typeof define=="function"&&define.amd?define(O):O()})(function(){"use strict";var O=11;function te(e,n){var t=n.attributes,a,r,s,d,o;if(!(n.nodeType===O||e.nodeType===O)){for(var y=t.length-1;y>=0;y--)a=t[y],r=a.name,s=a.namespaceURI,d=a.value,s?(r=a.localName||r,o=e.getAttributeNS(s,r),o!==d&&(a.prefix==="xmlns"&&(r=a.name),e.setAttributeNS(s,r,d))):(o=e.getAttribute(r),o!==d&&e.setAttribute(r,d));for(var B=e.attributes,M=B.length-1;M>=0;M--)a=B[M],r=a.name,s=a.namespaceURI,s?(r=a.localName||r,n.hasAttributeNS(s,r)||e.removeAttributeNS(s,r)):n.hasAttribute(r)||e.removeAttribute(r)}}var w,ne="http://www.w3.org/1999/xhtml",v=typeof document>"u"?void 0:document,ae=!!v&&"content"in v.createElement("template"),re=!!v&&v.createRange&&"createContextualFragment"in v.createRange();function ie(e){var n=v.createElement("template");return n.innerHTML=e,n.content.childNodes[0]}function le(e){w||(w=v.createRange(),w.selectNode(v.body));var n=w.createContextualFragment(e);return n.childNodes[0]}function fe(e){var n=v.createElement("body");return n.innerHTML=e,n.childNodes[0]}function ue(e){return e=e.trim(),ae?ie(e):re?le(e):fe(e)}function x(e,n){var t=e.nodeName,a=n.nodeName,r,s;return t===a?!0:(r=t.charCodeAt(0),s=a.charCodeAt(0),r<=90&&s>=97?t===a.toUpperCase():s<=90&&r>=97?a===t.toUpperCase():!1)}function se(e,n){return!n||n===ne?v.createElement(e):v.createElementNS(n,e)}function de(e,n){for(var t=e.firstChild;t;){var a=t.nextSibling;n.appendChild(t),t=a}return n}function k(e,n,t){e[t]!==n[t]&&(e[t]=n[t],e[t]?e.setAttribute(t,""):e.removeAttribute(t))}var F={OPTION:function(e,n){var t=e.parentNode;if(t){var a=t.nodeName.toUpperCase();a==="OPTGROUP"&&(t=t.parentNode,a=t&&t.nodeName.toUpperCase()),a==="SELECT"&&!t.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!n.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),t.selectedIndex=-1)}k(e,n,"selected")},INPUT:function(e,n){k(e,n,"checked"),k(e,n,"disabled"),e.value!==n.value&&(e.value=n.value),n.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,n){var t=n.value;e.value!==t&&(e.value=t);var a=e.firstChild;if(a){var r=a.nodeValue;if(r==t||!t&&r==e.placeholder)return;a.nodeValue=t}},SELECT:function(e,n){if(!n.hasAttribute("multiple")){for(var t=-1,a=0,r=e.firstChild,s,d;r;)if(d=r.nodeName&&r.nodeName.toUpperCase(),d==="OPTGROUP")s=r,r=s.firstChild;else{if(d==="OPTION"){if(r.hasAttribute("selected")){t=a;break}a++}r=r.nextSibling,!r&&s&&(r=s.nextSibling,s=null)}e.selectedIndex=t}}},U=1,ce=11,j=3,q=8;function T(){}function ve(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function pe(e){return function(t,a,r){if(r||(r={}),typeof a=="string")if(t.nodeName==="#document"||t.nodeName==="HTML"||t.nodeName==="BODY"){var s=a;a=v.createElement("html"),a.innerHTML=s}else a=ue(a);var d=r.getNodeKey||ve,o=r.onBeforeNodeAdded||T,y=r.onNodeAdded||T,B=r.onBeforeElUpdated||T,M=r.onElUpdated||T,xe=r.onBeforeNodeDiscarded||T,D=r.onNodeDiscarded||T,Be=r.onBeforeElChildrenUpdated||T,G=r.childrenOnly===!0,m=Object.create(null),L=[];function _(f){L.push(f)}function J(f,l){if(f.nodeType===U)for(var i=f.firstChild;i;){var u=void 0;l&&(u=d(i))?_(u):(D(i),i.firstChild&&J(i,l)),i=i.nextSibling}}function C(f,l,i){xe(f)!==!1&&(l&&l.removeChild(f),D(f),J(f,i))}function Q(f){if(f.nodeType===U||f.nodeType===ce)for(var l=f.firstChild;l;){var i=d(l);i&&(m[i]=l),Q(l),l=l.nextSibling}}Q(t);function I(f){y(f);for(var l=f.firstChild;l;){var i=l.nextSibling,u=d(l);if(u){var p=m[u];p&&x(l,p)?(l.parentNode.replaceChild(p,l),P(p,l)):I(l)}else I(l);l=i}}function De(f,l,i){for(;l;){var u=l.nextSibling;(i=d(l))?_(i):C(l,f,!0),l=u}}function P(f,l,i){var u=d(l);u&&delete m[u],!(!i&&(B(f,l)===!1||(e(f,l),M(f),Be(f,l)===!1)))&&(f.nodeName!=="TEXTAREA"?Le(f,l):F.TEXTAREA(f,l))}function Le(f,l){var i=l.firstChild,u=f.firstChild,p,h,N,R,A;e:for(;i;){for(R=i.nextSibling,p=d(i);u;){if(N=u.nextSibling,i.isSameNode&&i.isSameNode(u)){i=R,u=N;continue e}h=d(u);var H=u.nodeType,g=void 0;if(H===i.nodeType&&(H===U?(p?p!==h&&((A=m[p])?N===A?g=!1:(f.insertBefore(A,u),h?_(h):C(u,f,!0),u=A):g=!1):h&&(g=!1),g=g!==!1&&x(u,i),g&&P(u,i)):(H===j||H==q)&&(g=!0,u.nodeValue!==i.nodeValue&&(u.nodeValue=i.nodeValue))),g){i=R,u=N;continue e}h?_(h):C(u,f,!0),u=N}if(p&&(A=m[p])&&x(A,i))f.appendChild(A),P(A,i);else{var X=o(i);X!==!1&&(X&&(i=X),i.actualize&&(i=i.actualize(f.ownerDocument||v)),f.appendChild(i),I(i))}i=R,u=N}De(f,u,h);var ee=F[f.nodeName];ee&&ee(f,l)}var c=t,V=c.nodeType,Z=a.nodeType;if(!G){if(V===U)Z===U?x(t,a)||(D(t),c=de(t,se(a.nodeName,a.namespaceURI))):c=a;else if(V===j||V===q){if(Z===V)return c.nodeValue!==a.nodeValue&&(c.nodeValue=a.nodeValue),c;c=a}}if(c===a)D(t);else{if(a.isSameNode&&a.isSameNode(c))return;if(P(c,a,G),L)for(var z=0,_e=L.length;z<_e;z++){var K=m[L[z]];K&&C(K,K.parentNode,!1)}}return!G&&c!==t&&t.parentNode&&(c.actualize&&(c=c.actualize(t.ownerDocument||v)),t.parentNode.replaceChild(c,t)),c}}var oe=pe(te),b,S=[];function he(e){return S.push(b),S.length>100&&(alert("DML error: _baseStackOverflow in bushBase()"),S=[]),typeof e=="string"&&(b=document.getElementById(e)),b=e,b}function W(){return S.length}function Ae(e=1,n=-1,t="unselectBase"){for(let a=0;a<e;a++){if(S.length<=0){alert("DML error: _baseStack empty in popBase()");break}else b=S.pop();n>=0&&W()!=n&&alert("DML error: _baseStack size mismatch - "+t+", before: "+n+", after: "+W())}return S.length}function ge(e){if(typeof e=="string"){let n=E("span",null,null);return n.innerHTML=e,n}else return e}function Te(e,n){return typeof n=="string"&&(n={style:n}),typeof n=="object"&&Object.keys(n).forEach(function(t){let a=n[t];t!="style"?e.setAttribute(t,a):a.split(";").forEach(function(s){if(s){let d=s.split(":");if(d.length==2){let o=d[0].trim(),y=d[1].trim();e.style.setProperty(o,y)}}})}),e}function E(e,n,t){let a=document.createElement(e),r=Array.isArray(t);return t&&(typeof t=="number"&&(t=String(t)),typeof t=="string"?a.innerHTML=t:r?a.append(...t):a.appendChild(t)),n&&Te(a,n),a}function Y(e){let n=ge(e);if(b)b.appendChild(n);else if(document.body)document.body.appendChild(n);else{console.log("null Body found: "+e.textContent);return}return n}function $(e,n,t){return Y(E(e,n,t))}function be(e,n){return $("div",n,e)}const Se=(e=be("",null))=>he(e),ye=Ae,me=e=>(n,t)=>{let a=$(e,t,n);return a.name=e,a};function Ne(e){var n=document.createElement("template");e=e.trim(),n.innerHTML=e;const t=n.content.firstChild;return Y(t),t}function Oe(e,...n){const t=E(e,null,null);return t.id="wrapper",t.append(...n),t}function Ue(e){return Oe("span",e)}function Me(e,n){const t=(r,s)=>!r.isEqualNode(s);let a=e.firstChild;oe(a,Ue(n),{onBeforeElUpdated:t})}const we={m:me,dom:Se,udom:ye,render:Me,html:Ne};globalThis.MVU=we});
